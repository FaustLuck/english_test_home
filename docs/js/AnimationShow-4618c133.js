import{s as V,_ as Mt,m as wt,e as Pt,o as kt}from"./main-9f1d758b.js";function St(x){[x.width,x.height]=[window.innerWidth,window.innerHeight];const t=x.getContext("2d"),g=x.width,I=x.height,p=Math.round(Math.min(g,I)/4),T=Math.round(g/2),B=Math.round(I/2),P=i=>i*Math.PI/180,F=(i,a)=>Math.random()*(a-i)+i,D="rgb(255, 231, 188)",G="rgb(153, 54, 0)",H="rgb(107, 38, 0)";let j="rgb(42, 42, 42)",c="rgb(29, 29, 29)";const[e,R]=[p/3,p/10];let q=-p*11/12,k=q-p/5,K=[],Z=!1,L=1;const tt=.1;let N=1;const et={create(i,a){const l={x:i,y:a};let n={x:0,y:0,r:5};const M=Math.round(F(0,1))===1?F(0,50)*-.1:F(0,50)*.1;let _=F(-10,10);return{color:`hsl(${F(30,60)},100%,${F(50,100)}%)`,coords:{dx:M,dy:_,...n},translate:l}},draw({translate:i,coords:a,color:l}){return t.save(),t.translate(i.x,i.y),t.rotate(30*Math.PI/180),t.fillStyle=l,t.beginPath(),t.arc(a.x,a.y,a.r,0,2*Math.PI),t.fill(),t.restore(),this.update(a)},update(i){return i.r-=.05,i.x+=i.dx,i.y+=i.dy,i.dy++,i}},lt={create(i,a,l){const n={x:Math.min(i.x,a.x,l.x)*10/p,y:Math.min(i.y,a.y,l.y)*10/p};return{a:i,b:a,c:l,delta:n,translate:{x:0,y:0}}},update({delta:i,translate:a}){return a.x+=i.x,a.y+=i.y,a},draw({a:i,b:a,c:l,translate:n,delta:y}){return t.save(),t.translate(n.x,n.y),t.fillStyle="transparent",t.strokeStyle="black",t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(a.x,a.y),t.lineTo(l.x,l.y),t.clip(),it(),t.restore(),this.update({delta:y,translate:n})}};let J=[],W=1,S=[],Q=1,U=0;function it(){const i=p/4,a=Math.acos(i/(2*p));t.save(),t.beginPath(),t.fillStyle=c,t.arc(0,0,p,0,2*Math.PI),t.fill(),t.globalCompositeOperation="source-atop",t.beginPath(),t.arc(0,0,p,-a,a),t.arc(i,0,p,Math.PI-a,Math.PI+a),t.fillStyle=j,t.fill(),t.restore()}function nt(){function i(l){const n=P(120);t.beginPath(),t.ellipse(0,k,e,R,0,n*!l,n*l||Math.PI),t.ellipse(0,q,e,R,0,n*l||Math.PI,n*!l,!0),t.ellipse(0,k,e,R,0,n*!l,n*!l),t.stroke(),t.fill()}function a(l){const n=P(160);t.beginPath(),t.ellipse(0,k,e,R,0,n,2*(n-Math.PI),!!l),t.stroke(),t.fill()}for(let l=0;l<2;l++)t.fillStyle=l?j:c,t.strokeStyle=l?j:c,a(l),i(l)}function ot(i=0,a=1,l){const n=P(120),y={x:0,y:k},M={x:-e/2,y:k-p/4},_={x:e/3,y:k-p/2},E={x:-e/6,y:k-p*3/4},[O,o]=[e/6,R/6];let h,d;function w(u){const m=(1-u)**3,b=3*u*(1-u)**2,r=3*u**2*(1-u),s=u**3;h=m*y.x+b*M.x+r*_.x+s*E.x,d=m*y.y+b*M.y+r*_.y+s*E.y,t.beginPath(),t.strokeStyle=l||H,t.ellipse(h,d,O,o,0,n,Math.PI),t.stroke(),t.beginPath(),t.strokeStyle=l||G,t.ellipse(h,d,O,o,0,0,n),t.stroke()}function f(){t.beginPath(),t.fillStyle=l||H,t.ellipse(h,d,O,o,0,0,2*Math.PI),t.fill()}for(let u=i;u<=a;u+=.001)w(u);if(f(),l)return[h,d]}function ut(){Z=!0,it(),nt(),ot(0,L);const i=Math.max(L,0),a=Math.min(1,L+tt);let[l,n]=ot(i,a,D);l&&n&&K.push(et.create(l,n)),K=K.filter(y=>(y.coords=et.draw(y),y.coords.r>0)),L-=tt/10}function mt(){J=J.filter(i=>(i.translate=lt.draw(i),Math.abs(i.translate.x)<g&&Math.abs(i.translate.y)<I)),k-=10,q-=10,nt(),N-=.01,j=`rgba(42, 42, 42, ${N})`,c=`rgba(29, 29, 29, ${N})`}function xt(){W-=.02;for(let l=0;l<S.length;l++){const{r:n,g:y,b:M,o:_}=S[l].color;t.fillStyle=`rgba(${n},${y},${M},${_}`;const E=S[l].pos;t.beginPath(),E.forEach(({x:O,y:o})=>{t.lineTo(O,o)}),t.fill(),S[l].pos=E.map(a),S[l].color=i(S[l].color)}S=S.filter(l=>l.pos.every(n=>Math.abs(n.x)<x.width*10&&Math.abs(n.y)<x.height*10));function i({r:l,g:n,b:y,o:M}){return{r:l,g:n-1,b:y-.5,o:M-.02}}function a({x:l,y:n}){const y=l/15,M=n/15;return{x:l+y,y:n+M}}}function yt(){const i="TEST OVER";t.textBaseline="middle",t.textAlign="center",t.fillStyle="rgba(255, 255, 255, 1)",t.save();for(let a=.02;a<.1;a+=.02)t.font=`${(U-a)*16}rem Khula sans-serif`,t.fillText(i,T,B);t.restore(),t.font=`${U*16}rem Khula sans-serif`,t.fillText(i,T,B),t.font=`${U*16}rem Khula sans-serif`,t.strokeStyle="rgba(0, 0, 0, 1)",t.strokeText(i,T,B),U+=.01,Q=t.measureText(i).width}function at(){Q<T*1.5?(requestAnimationFrame(at),t.fillStyle="#000",t.fillRect(-x.width,-x.height,2*x.width,2*x.height)):setTimeout(()=>V.commit("setAnimationStatus",!1),3e3),(K.length||!Z)&&ut(),!K.length&&N>=0&&mt(),N<.5&&W>0&&xt(),W<0&&Q===1&&(t.rotate(P(30)),t.translate(-T,-B)),W<0&&yt()}function dt(){const[i,a]=bt(p),l=[];for(let n=0;n<a.length;n+=3){const y=lt.create(i[a[n]],i[a[n+1]],i[a[n+2]]);l.push(y)}return l}function gt(i){let l=1,n=[],y=0;for(let M=0;M<i;M++){const _=F(0,2*Math.PI);n.push(_)}return n.sort(),function(){const M=100*Math.cos(n[y])*(1-l/4),_=100*Math.sin(n[y])*(1-l/4);return l*=-1,y++,{x:M,y:_}}}function pt(){var y;(y=S[S.length-1])!=null&&y.flag&&(S[S.length-1].flag=!1);let i={r:255,g:236,b:73,o:W};const a=Math.round(F(50,75)),l=gt(a);let n=[];for(let M=0;M<a;M++)n.push(l());S.push({flag:!0,pos:n,color:i})}function bt(i){const l=[],n=Math.floor(i/4);for(let o=0;o<n;o++)l.push(y(i));function y(o){const h=Math.random()*(3*o)-1.5*o,d=Math.random()*(3*o)-1.5*o;return{x:h,y:d}}function M(o){let h=o.length;if(h<3)return[];o=o.slice(0);let d=[];for(let r=0;r<h;r++)d.push(r);d.sort((r,s)=>o[r].x-o[s].x);let w=E(o);o.push(w.p1,w.p2,w.p3);let f=[_(o,h,h+1,h+2)],u=[],m=[];for(let r=d.length-1;r>=0;r--){for(let s=f.length-1;s>=0;s--){let C=o[d[r]].x-f[s].x;if(C>0&&C*C>f[s].r){u.push(f[s]),f.splice(s,1);continue}let z=o[d[r]].y-f[s].y;C*C+z*z-f[s].r>1e-7||(m.push(f[s].a,f[s].b,f[s].b,f[s].c,f[s].c,f[s].a),f.splice(s,1))}O(m);for(let s=m.length-1;s>=0;){let C=m[s];if(s--,s<0)break;let z=m[s];s--,f.push(_(o,z,C,d[r]))}m=[]}for(let r=f.length-1;r>=0;r--)u.push(f[r]);let b=[];for(let r=0;r<u.length;r++)u[r].a<h&&u[r].b<h&&u[r].c<h&&b.push(u[r].a,u[r].b,u[r].c);return b}function _(o,h,d,w){let f=o[h].x,u=o[h].y,m=o[d].x,b=o[d].y,r=o[w].x,s=o[w].y,C=Math.abs(u-b),z=Math.abs(b-s),A,$;if(C<1e-7){let X=-((r-m)/(s-b)),Y=(m+r)/2,v=(b+s)/2;A=(f+m)/2,$=X*(A-Y)+v}else if(z<1e-7){let X=-((m-f)/(b-u)),Y=(f+m)/2,v=(u+b)/2;A=(m+r)/2,$=X*(A-Y)+v}else{let X=-((m-f)/(b-u)),Y=-((r-m)/(s-b)),v=(f+m)/2,ht=(u+b)/2,ct=(m+r)/2,ft=(b+s)/2;A=(X*v-Y*ct+ft-ht)/(X-Y),C>z?$=X*(A-v)+ht:$=Y*(A-ct)+ft}let rt=m-A,st=b-$;return{a:h,b:d,c:w,x:A,y:$,r:rt*rt+st*st}}function E(o){let h=1e6,d=-1e6,w=1e6,f=-1e6;for(let $=0;$<o.length;$++)h=Math.min(h,o[$].x),w=Math.min(w,o[$].y),d=Math.max(d,o[$].x),f=Math.max(f,o[$].y);let u=d-h,m=f-w,b=Math.max(u,m),r=u*.5+h,s=m*.5+w;const C={x:r-10*b,y:s-10*b},z={x:r,y:s+10*b},A={x:r+10*b,y:s-10*b};return{p1:C,p2:z,p3:A}}function O(o){for(let h=o.length-1;h>=0;){let d=o[h];h--;let w=o[h];h--;let f,u;for(let m=h;m>=0;){if(f=o[m],m--,u=o[m],m--,w===u&&d===f){o.splice(h+1,2),o.splice(m+1,2);break}if(w===f&&d===u){o.splice(h+1,2),o.splice(m+1,2);break}}}}return[l,M(l)]}t.translate(T,B),t.rotate(P(-30)),J=dt(),pt(),at(),V.commit("setAnimationStatus",!0)}function _t(x){let t;x.width=window.innerWidth,x.height=window.innerHeight;const g=x.getContext("2d");g.fillStyle="#000",g.fillRect(0,0,x.width,x.height);let I=[],p=[],T=20,B={x:x.width/2,y:x.height/2},P=400;for(let c=0;c<T;c++){let e={x:Math.random()*P/2-P/4+B.x,y:Math.random()*P*2+x.height,size:Math.random()+.5,fill:"#fd1",vx:Math.random()-.5,vy:-(Math.random()+4),ax:Math.random()*.02-.01,far:Math.random()*P+(B.y-P)};e.base={x:e.x,y:e.y,vx:e.vx},I.push(e)}function F(){let c=Math.floor(Math.random()*256),e=Math.floor(Math.random()*256),R=Math.floor(Math.random()*256);return`rgb(${c},${e},${R}`}function D(c){t||(t=c),c-t>5e3&&G(),H(),j(),requestAnimationFrame(D)}function G(){let{opacity:c}=getComputedStyle(x);c<=0&&V.commit("setAnimationStatus",!1),c-=.01,x.style.opacity=c}function H(){for(let c=0;c<I.length;c++){let e=I[c];if(e.y<=e.far){let R=F();for(let q=0;q<T*5;q++){let k={x:e.x,y:e.y,size:Math.random()+1.5,fill:R,vx:Math.random()*5-2.5,vy:Math.random()*-5+1.5,ay:.05,alpha:1,life:Math.round(Math.random()*P/2)+P/2};k.base={life:k.life,size:k.size},p.push(k)}e.y=e.base.y,e.x=e.base.x,e.vx=e.base.vx,e.ax=Math.random()*.02-.01}e.x+=e.vx,e.y+=e.vy,e.vx+=e.ax}for(let c=p.length-1;c>=0;c--){let e=p[c];e&&(e.x+=e.vx,e.y+=e.vy,e.vy+=e.ay,e.alpha=e.life/e.base.life,e.size=e.alpha*e.base.size,e.alpha=e.alpha>.6?1:e.alpha,e.life--,e.life<=0&&p.splice(c,1))}}function j(){g.globalCompositeOperation="source-over",g.globalAlpha=.18,g.fillStyle="#000",g.fillRect(0,0,x.width,x.height),g.globalCompositeOperation="screen",g.globalAlpha=1;for(let c=0;c<I.length;c++){let e=I[c];g.beginPath(),g.arc(e.x,e.y,e.size,0,Math.PI*2),g.closePath(),g.fillStyle=e.fill,g.fill()}for(let c=0;c<p.length;c++){let e=p[c];g.globalAlpha=e.alpha,g.beginPath(),g.arc(e.x,e.y,e.size,0,Math.PI*2),g.closePath(),g.fillStyle=e.fill,g.fill()}}requestAnimationFrame(D),V.commit("setAnimationStatus",!0)}const $t={name:"AnimationShow",computed:{...wt(["mode","isAnimate"])},watch:{isAnimate(x){x||this.$router.replace({name:"test"})}},async mounted(){switch(this.mode){case"fire-show":await _t(this.$refs.canvas);break;case"fail-show":St(this.$refs.canvas);break}}},Ct={ref:"canvas"};function At(x,t,g,I,p,T){return kt(),Pt("canvas",Ct,null,512)}const Tt=Mt($t,[["render",At],["__scopeId","data-v-1b1eb651"]]);export{Tt as default};
