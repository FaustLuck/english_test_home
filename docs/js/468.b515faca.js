"use strict";(self["webpackChunkenglish_test_home"]=self["webpackChunkenglish_test_home"]||[]).push([[468],{5925:function(t,e,n){n.d(e,{Z:function(){return m}});var s=n(8473),r=n(4887);const i={key:0},a=["value"],o={key:1};function c(t,e,n,c,u,h){return(0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)(["start_btn",{test:"test"===h.mode}])},["test"!==h.mode?((0,s.wg)(),(0,s.iD)("div",i)):(0,s.kq)("",!0),(0,s._)("input",{type:"button",value:u.title,onClick:e[0]||(e[0]=(...t)=>h.changeReady&&h.changeReady(...t))},null,8,a),"test"!==h.mode?((0,s.wg)(),(0,s.iD)("div",o)):(0,s.kq)("",!0)],2)}var u=n(299),h={name:"StartButton",data(){return{title:"Начать тест"}},computed:{...(0,u.rn)(["readyToTest"]),mode(){return`${this.$router.currentRoute.value.name}`}},watch:{readyToTest:function(t){this.changeTitle(t)},mode:function(t){"test"!==t&&this.$store.dispatch("changeReady",!1)}},methods:{changeReady(){"test"!==this.mode?this.$router.push("/"):this.$store.dispatch("changeReady",!this.readyToTest)},changeTitle(t){this.title=t?"Завершить тест":"Начать тест"}}},l=n(5312);const d=(0,l.Z)(h,[["render",c],["__scopeId","data-v-0fd35a20"]]);var m=d},5988:function(t,e,n){n.r(e),n.d(e,{default:function(){return T}});var s=n(8473),r=n(4887);const i=t=>((0,s.dD)("data-v-6f5864ca"),t=t(),(0,s.Cn)(),t),a=i((()=>(0,s._)("div",null,null,-1))),o={key:0,class:"test_container"};function c(t,e,n,i,c,u){const h=(0,s.up)("loader-spinner"),l=(0,s.up)("start-button"),d=(0,s.up)("difficult-list");return c.loading?((0,s.wg)(),(0,s.j4)(h,{key:0})):((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,r.C_)({fail:0===c.timerSec})},[(0,s._)("header",{class:(0,r.C_)({warning:c.timerSec>10&&c.timerSec<31,alert:c.timerSec<11&&c.timerSec>0})},[(0,s.Wm)(l),(0,s._)("span",null,(0,r.zw)(c.timerString),1),a],2),t.readyToTest?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(d,{questions:c.test},null,8,["questions"])])):(0,s.kq)("",!0)],2))}var u=n(299),h=n(7828);const l={create:function({dictionary:t,limits:e,variants:n}){let s={},r={};for(let i in t){let a=t[i],o=e[i],c=m(a,o).sort(h.qu);r[i]=[...c],r[i]=r[i].map((t=>({answer:void 0,question:t.question}))),c=d(o,c,a,n),s[i]=c}return[s,r]},cancel:function(t,e,n,{dictionary:s}){let r=Object.values(t).reduce(((t,e)=>t+e.length),0);for(let u in s)for(let e of t[u]){let t=s[u].find((t=>t.question===e.question));e.answer||(e.answer="Не выбрано"),e.answer=t.answer===e.answer?[t.answer]:[e.answer,t.answer].sort(),e.correct=1===e.answer.length,e.index=e.answer.findIndex((e=>e===t.answer))}let i=0;Object.values(t).forEach((t=>{i+=t.reduce(((t,e)=>t+e.answer.length),0)})),i=2*r-i;let a={},[o,c]=(0,h._3)();return a[o]={},a[o][c]={test:t,congratulations:i===r,reason:n,["time spent"]:e,questions:r,correctAnswers:i},a}};function d(t,e,n,s){for(let r=0;r<t;r++){let t={...e[r]},i=t.answer,a=m(n.map((t=>t.answer)).filter((t=>t!==i)),s-1);a.push(i),a.sort(),t.answer=a,e[r]={...t}}return e}function m(t,e){let n=[],s=[...t];for(let r=0;r<e;r++){let t=f(s);n.push(t),s=g(t,s)}return n}function g(t,e){return e.filter((e=>t instanceof Object?e.question!==t.question:e!==t))}function f(t){return t[Math.floor(Math.random()*t.length)]}var w=n(5925),S=n(4924),p={name:"TestPage",components:{DifficultList:S.Z,StartButton:w.Z},data(){return{timerString:"",timerSec:0,timerStart:0,counterId:"",loading:!0,test:{}}},watch:{timerSec:function(t){this.timerString=this.timeToString(t),t||this.cancel()},settings:function(t){t?.timer&&(this.loading=!1,this.timerSec=this.timerStart=60*t.timer.min+t.timer.sec)},readyToTest:function(t){t?this.begin():this.cancel()}},async created(){this.$store.dispatch("settings/getSettings")},computed:{...(0,u.rn)("settings",["settings"]),...(0,u.rn)(["readyToTest","answers"]),...(0,u.rn)("authorization",["displayName"])},methods:{timeToString(t){let e=(t%60).toString().padStart(2,"0"),n=(t-e)/60;return`${n}:${e}`},begin(){let t;[this.test,t]=l.create(this.settings),this.timerSec=this.timerStart,this.$store.commit("SAVE_ANSWERS",t),this.start()},cancel(){clearInterval(this.counterId);let t=this.timeToString(this.timerStart-this.timerSec),e=this.timerStart-this.timerSec?"Тест завершен":"Время истекло",n=l.cancel(this.answers,t,e,this.settings);this.$store.dispatch("saveAnswers",n),this.$store.dispatch("changeReady",!1),this.timerSec?this.$router.push("result"):setTimeout((()=>{this.$router.push("result")}),2500)},start(){this.counterId=setInterval((()=>{this.timerSec--}),1e3)}}},v=n(5312);const y=(0,v.Z)(p,[["render",c],["__scopeId","data-v-6f5864ca"]]);var T=y}}]);
//# sourceMappingURL=468.b515faca.js.map