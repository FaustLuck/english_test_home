import{_ as k,d as h,m as p,e as _,h as g,f as m,j as i,q as d,s as c,u as v,F as y,l as V,b as x,c as S,o as r,x as D,a as L,p as C,k as E,r as f}from"./main-6bab10b7.js";import{s as b}from"./settingsStore-d0c5bbe1.js";const U={name:"SettingsView",components:{testDifficultComponent:h(()=>L(()=>import("./testDifficultComponent-d29db2a9.js"),["js/testDifficultComponent-d29db2a9.js","js/main-6bab10b7.js","css/main-df3f9d20.css","js/settingsStore-d0c5bbe1.js","css/testDifficultComponent-cfebc989.css"])),preloaderComponent:h(()=>L(()=>import("./preloaderComponent-0dad5c9a.js"),["js/preloaderComponent-0dad5c9a.js","js/main-6bab10b7.js","css/main-df3f9d20.css","css/preloaderComponent-82881bbd.css"]))},data(){return{min:0,sec:0,localVariants:0,localLimits:{}}},watch:{timer(s){s&&this.setSettingsToLocal()}},computed:{...p(b,["timer","dictionary","limits","variants"]),...p(x,["sub"]),...p(S,["orderDifficult","isLoading"]),minVariantCount(){let s=[];for(let e in this.dictionary)s.push(this.dictionary[e].length);return Math.min(...s)}},methods:{..._(b,["getSettings","saveTimer","saveVariants","saveLimits"]),..._(S,["setLoading"]),timeToString(){this.sec=(this.timer%60).toString().padStart(2,"0"),this.min=(this.timer-this.sec)/60},change(s,e){const{max:l,type:o}=s.target.dataset;if(o!=="limits"){if(this[o]>parseInt(l)&&(this[o]=l),["min","sec"].includes(o)){const n=this.min*60+ +this.sec;this.timeToString(),this.saveTimer({timer:n})}o==="localVariants"&&this.saveVariants({variants:this.localVariants})}else this.localLimits[e]>parseInt(l)&&(this.localLimits[e]=l),this.saveLimits({difficult:e,limit:this.localLimits[e]});s.target.style.backgroundColor="#dddd5d"},setSettingsToLocal(){this.timeToString(),this.localVariants=this.variants,this.localLimits=this.limits,this.setLoading(!1)}},async mounted(){this.timer?this.setSettingsToLocal():await this.getSettings({sub:this.sub})}},I=s=>(C("data-v-99c20927"),s=s(),E(),s),A={key:1,class:"settings"},B={class:"settings__row"},P=I(()=>i("span",null,"Ограничение по времени: ",-1)),F={class:"settings__row"},M=I(()=>i("span",null,"Количество вариантов ответов: ",-1)),N=["data-max"],O=["data-max","onUpdate:modelValue","onInput"],R={class:"container"};function j(s,e,l,o,n,a){const w=f("preloader-component"),T=f("test-difficult-component");return s.isLoading?(r(),g(w,{key:0})):(r(),m("div",A,[i("div",B,[P,i("div",null,[d(i("input",{"data-max":"59","data-type":"min",type:"number","onUpdate:modelValue":e[0]||(e[0]=t=>n.min=t),onInput:e[1]||(e[1]=(...t)=>a.change&&a.change(...t))},null,544),[[c,n.min,void 0,{number:!0}]]),v(" мин "),d(i("input",{"data-max":"59","data-type":"sec",type:"number","onUpdate:modelValue":e[2]||(e[2]=t=>n.sec=t),onInput:e[3]||(e[3]=(...t)=>a.change&&a.change(...t))},null,544),[[c,n.sec,void 0,{number:!0}]]),v(" сек ")])]),i("div",F,[M,i("div",null,[d(i("input",{"data-max":a.minVariantCount,"data-type":"localVariants",type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>n.localVariants=t),onInput:e[5]||(e[5]=(...t)=>a.change&&a.change(...t))},null,40,N),[[c,n.localVariants,void 0,{number:!0}]])])]),(r(!0),m(y,null,V(s.orderDifficult,t=>(r(),m("div",{class:"settings__row",key:"limit"+t},[i("span",null,"Количество вопросов "+D(t)+": ",1),i("div",null,[d(i("input",{"data-max":s.dictionary[t].length,"data-type":"limits",type:"number","onUpdate:modelValue":u=>n.localLimits[t]=u,onInput:u=>a.change(u,t)},null,40,O),[[c,n.localLimits[t],void 0,{number:!0}]])])]))),128)),i("div",R,[(r(!0),m(y,null,V(s.orderDifficult,t=>(r(),g(T,{key:t,difficult:t,"part-answers":s.dictionary[t]},null,8,["difficult","part-answers"]))),128))])]))}const G=k(U,[["render",j],["__scopeId","data-v-99c20927"]]);export{G as default};
